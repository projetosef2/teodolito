<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Teodolito com Cálculo de Altura</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 0;
            padding: 0;
        }
        
        .container {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            height: 400px;
            position: relative;
            border-bottom: 2px solid black;
            background-image: url('imagens/fundo.jpg'); /* Caminho correto para a imagem */
            background-size: cover;
            background-position: center;
        }

        .teodolito {
            width: 20px;
            height: 60px;
            background: gray;
            position: absolute;
            left: 50px;
            bottom: 0;
            display: flex;
            align-items: center;
        }

        .linha {
            position: absolute;
            width: 100px;
            height: 2px;
            background: red;
            transform-origin: left;
        }

        .objeto {
            width: 50px;
            background: blue;
            position: absolute;
            bottom: 0;
            right: 50px;
            transition: height 0.2s ease-in-out;
        }

        .visor {
            margin-top: 10px;
            font-size: 20px;
            font-weight: bold;
        }

        .calculadora {
            margin-top: 20px;
        }

        input {
            margin: 10px;
        }
    </style>
</head>
<body>
    <h1>Simulador de Teodolito</h1>
    <div class="container">
        <div class="teodolito" id="teodolito">
            <div class="linha" id="linha"></div>
        </div>
        <div class="objeto" id="objeto"></div>
    </div>
    <div>
        <label>Ângulo Vertical: <span id="anguloV">0</span>°</label><br>
        <input type="range" id="controleV" min="-90" max="90" value="0">
    </div>
    <div>
        <label>Distância até o Objeto (m):</label><br>
        <input type="number" id="distancia" value="10">
    </div>
    <div>
        <label>Escolha a Opção: </label><br>
        <select id="opcaoCalculo">
            <option value="altura">Calcular Altura</option>
            <option value="distancia">Calcular Distância</option>
        </select>
    </div>
    <div class="visor">
        Leitura: <span id="leitura">0°</span>
    </div>
    <div class="calculadora">
        <h2>Calculadora Trigonométrica</h2>
        <p>Altura Calculada: <span id="altura">0</span> m</p>
        <p>Seno: <span id="seno">0</span></p>
        <p>Cosseno: <span id="cosseno">0</span></p>
        <p>Tangente: <span id="tangente">0</span></p>
    </div>
    <script>
        const controleV = document.getElementById('controleV');
        const distancia = document.getElementById('distancia');
        const anguloV = document.getElementById('anguloV');
        const linha = document.getElementById('linha');
        const leitura = document.getElementById('leitura');
        const objeto = document.getElementById('objeto');
        const altura = document.getElementById('altura');
        const seno = document.getElementById('seno');
        const cosseno = document.getElementById('cosseno');
        const tangente = document.getElementById('tangente');
        const opcaoCalculo = document.getElementById('opcaoCalculo');

        function atualizarTeodolito() {
            let v = parseFloat(controleV.value); // Ângulo vertical
            const d = parseFloat(distancia.value);
            const radianos = v * (Math.PI / 180);

            anguloV.textContent = v;
            linha.style.transform = `rotate(${v}deg)`;
            leitura.textContent = `${v}°`;

            // Cálculos trigonométricos
            const alturaCalc = Math.tan(radianos) * d;
            const distanciaCalc = alturaCalc / Math.tan(radianos);

            altura.textContent = alturaCalc.toFixed(2);
            seno.textContent = Math.sin(radianos).toFixed(4);
            cosseno.textContent = Math.cos(radianos).toFixed(4);
            tangente.textContent = Math.tan(radianos).toFixed(4);

            // Se a opção for 'altura', calculamos a altura do objeto (prédio)
            if (opcaoCalculo.value === 'altura') {
                objeto.style.height = `${alturaCalc * 10}px`; // Multiplicado para visualização
            }

            // Se a opção for 'distancia', calculamos a distância
            if (opcaoCalculo.value === 'distancia') {
                objeto.style.height = `${d * 10}px`; // Ajusta a altura do objeto com base na distância
            }

            // Atualiza a posição do objeto dependendo do cálculo
            objeto.style.bottom = '0px';
        }

        controleV.addEventListener('input', atualizarTeodolito);
        distancia.addEventListener('input', atualizarTeodolito);
        opcaoCalculo.addEventListener('change', atualizarTeodolito);
    </script>
</body>
</html>
